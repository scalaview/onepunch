<div class="row">
  <div class='col-lg-2 col-xs-4 pull-right'>
    <a href="/admin/trafficplans/new">
      <button class="btn btn-primary col-lg-12 btn-large">
        <i class="glyphicon glyphicon-plus"></i> 新建
      </button>
    </a>
  </div>
</div>
<div class="row">
  <div class='col-lg-2 col-xs-3'>
    <a href="/admin/trafficplans">
      <button class="btn btn-success col-lg-12 btn-large">
        All
      </button>
    </a>
  </div>
  {{#each types}}
    <div class='col-lg-2 col-xs-3'>
      <a href="/admin/trafficplans?type={{val}}">
        <button class="btn btn-success col-lg-12 btn-large">
          {{name}}
        </button>
      </a>
    </div>
  {{/each}}
</div>
<hr>
<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
          流量套餐
      </div>
      <!-- /.panel-heading -->
      <div class="panel-body">
        <div class="table-responsive">
          <table id="mainTable" class="table table-striped">
            <thead>
              <tr>
                  <th>标题</th>
                  <th>接口提供商</th>
                  <th>花费</th>
                  <th>成本</th>
                  <th>排序</th>
                  <th>是否显示</th>
                  <th>提供商</th>
                  <th>分组</th>
                  <th></th>
              </tr>
            </thead>
            <tbody>
              {{#each trafficPlans.rows }}
                <tr>
                    <td data-id="{{id}}" data-name="name">{{ name }}</td>
                    <td data-id="{{id}}" data-name="type" data-disabled="disabled">{{ apiProvider type }}</td>
                    <td data-id="{{id}}" data-name="cost" data-type="number">{{ cost }}</td>
                    <td data-id="{{id}}" data-name="purchasePrice" data-type="number">{{ purchasePrice }}</td>
                    <td data-id="{{id}}" data-name="sortNum" data-type="integer">{{ sortNum }}</td>
                    <td>
                      <label>
                        <input type="checkbox" class="displaySwich" name="display" data-id="{{id}}" {{ isChecked display }} >
                        {{ display }}
                      </label>
                    </td>
                    <td data-id="{{id}}" class="col-lg-2">
                      {{ selectTag ../providerOptions ../providerCollection providerId }}
                    </td>
                    <td data-id="{{id}}" class="col-lg-2">
                      {{ selectTag ../trafficgroupsOptions ../trafficgroupsCollection trafficGroupId }}
                    </td>
                    <td>
                      <a href="/admin/trafficplans/{{id}}/edit" class="list-group-item">
                        <i class="glyphicon glyphicon-pencil"></i>
                      </a>
                    </td>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        <!-- /.table-responsive -->

      </div>

      <div class="panel-footer">
          {{pagination trafficPlans (addParams '/admin/trafficplans' query)}}
      </div>
      <!-- /.panel-body -->
    </div>
    <!-- /.panel -->
  </div>
</div>
<script>
  $('#mainTable').editableTableWidget().violet()
</script>